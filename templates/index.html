<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Diabetes Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="overlay"></div>
    <div class="container">
        <div class="form-container">
            <h1>Diabetes Prediction System</h1>
            <p>Enter your medical details to check your risk of diabetes</p>

            <form action="/predict" method="POST">
                <div class="form-grid">
                    <!-- Row 1 -->
                    <select name="Sex" id="Sex" required>
                        <option value="" disabled selected>Sex</option>
                        <option value="Female">Female</option>
                        <option value="Male">Male</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="number" name="Pregnancies" id="Pregnancies" placeholder="Pregnancies" required>

                    <!-- Row 2 -->
                    <input type="number" name="Glucose" placeholder="Glucose" required>
                    <input type="number" name="BloodPressure" placeholder="Blood Pressure" required>

                    <!-- Row 3 -->
                    <input type="number" name="SkinThickness" placeholder="Skin Thickness" required>
                    <input type="number" name="Insulin" placeholder="Insulin" required>

                    <!-- Row 4 -->
                    <input type="number" step="0.1" name="BMI" placeholder="BMI" required>
                    <input type="number" step="0.01" name="DiabetesPedigreeFunction" placeholder="Diabetes Pedigree Function" required>

                    <!-- Row 5 -->
                    <input type="number" name="Age" placeholder="Age" required>
                    <select name="FamilyHistory" id="FamilyHistory">
                        <option value="" disabled selected>Family History</option>
                        <option value="unknown">Unknown</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>

                    <!-- Row 6 -->
                    <select name="Smoking" id="Smoking">
                        <option value="" disabled selected>Smoking</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                    <select name="ActivityLevel" id="ActivityLevel">
                        <option value="" disabled selected>Activity Level</option>
                        <option value="sedentary">Sedentary</option>
                        <option value="moderate">Moderate</option>
                        <option value="active">Active</option>
                    </select>
                </div>
                <button type="submit">Predict</button>
            </form>

            <script>
                // Auto-set pregnancies to 0 for Male and disable input to avoid confusion
                const sexEl = document.getElementById('Sex');
                const pregEl = document.getElementById('Pregnancies');
                function updatePreg() {
                    if (sexEl.value === 'Male') {
                        pregEl.value = 0;
                        pregEl.disabled = true;
                    } else {
                        pregEl.disabled = false;
                    }
                }
                sexEl.addEventListener('change', updatePreg);
                // Initialize on page load
                updatePreg();
            </script>

            {% if result %}
<div class="result-box">
    {{ result }}
    {% if session.last_input %}
    <div class="meta">Last input: Sex={{ session.last_input.Sex }}, Pregnancies={{ session.last_input.Pregnancies }}, FamilyHistory={{ session.last_input.FamilyHistory }}, Smoking={{ session.last_input.Smoking }}, Activity={{ session.last_input.ActivityLevel }}</div>
    {% endif %}
</div>
{% endif %}
        </div>
    </div>
</body>
</html>
